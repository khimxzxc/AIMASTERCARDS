# ü§ñ PersonaFlowBot ‚Äî Telegram AI –ë–æ—Ç –¥–ª—è –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–π –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏

–≠—Ç–æ—Ç –±–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–∞–Ω–∫–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏—Ö –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π —Å–µ–≥–º–µ–Ω—Ç —Å –ø–æ–º–æ—â—å—é AI (LLaMA3 –æ—Ç Groq API). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏–Ω—Å–∞–π—Ç–æ–≤, –≥—Ä–∞—Ñ–∏–∫–∏ –∏ Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (—á–µ—Ä–µ–∑ ML)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è AI-–∏–Ω—Å–∞–π—Ç–æ–≤ —á–µ—Ä–µ–∑ LLaMA3
- Telegram-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ Fly.io –∏–ª–∏ Docker

---

## üß† –°–µ–≥–º–µ–Ω—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤

–ü–æ—Å–ª–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ **KMeans** –∫–ª–∏–µ–Ω—Ç—ã –¥–µ–ª—è—Ç—Å—è –Ω–∞ 3 –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–∞:

| –°–µ–≥–º–µ–Ω—Ç ID | –ù–∞–∑–≤–∞–Ω–∏–µ                                        | –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è                                                                             |
| ----------------- | ------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- |
| `0`             | **–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç**         | –ù–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –º–∞–ª–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –±–∞–∑–æ–≤—ã–µ —Ç—Ä–∞—Ç—ã |
| `1`             | **–¶–∏—Ñ—Ä–æ–≤–æ–π –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫** | –ß–∞—Å—Ç—ã–µ –ø–æ–µ–∑–¥–∫–∏, –æ–ø–ª–∞—Ç–∞ –æ–Ω–ª–∞–π–Ω, –≤—ã—Å–æ–∫–∏–π % travel                                 |
| `2`             | **–ê–∫—Ç–∏–≤–Ω—ã–π –≥–æ—Ä–æ–∂–∞–Ω–∏–Ω**           | –ß–∞—Å—Ç—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –µ–¥–∞/–∫–æ—à–µ–ª–µ–∫/–≥–æ—Ä–æ–¥—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å                |

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª                  | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 |
| ------------------------- | ---------------------------------------------------- |
| `main.py`               | Telegram-–±–æ—Ç                                      |
| `groq_client.py`        | –†–∞–±–æ—Ç–∞ —Å Groq API (LLaMA3)                    |
| `insight_chart.py`      | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤                  |
| `segment_logic.py`      | ML: KMeans –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è                |
| `aggregate_features.py` | –†–∞—Å—á—ë—Ç –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫ |
| `merge_clients.py`      | –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ features + segments           |
| `insert_segments.py`    | –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –≤ –ë–î          |
| `requirements.txt`      | Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏                        |
| `Dockerfile`            | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è                       |
| `fly.toml`              | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Fly.io               |
| `.env.example`          | –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è     |
| `README.md`             | –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞                      |

---

## üìã –ö–æ–º–∞–Ω–¥—ã Telegram-–±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                |
| ---------------------- | ------------------------------------------------------------------- |
| `/start`             | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∫–æ–º–∞–Ω–¥–∞–º                          |
| `/segment <card_id>` | –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å –∫–ª–∏–µ–Ω—Ç–∞            |
| `/insight <card_id>` | AI-–∏–Ω—Å–∞–π—Ç + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏                          |
| `/random`            | –°–ª—É—á–∞–π–Ω—ã–π –∫–ª–∏–µ–Ω—Ç                                     |
| `/clients`           | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö `card_id`                  |
| `/segments`          | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º |

---

## üß™ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
git clone https://github.com/yourname/PersonaFlowBot.git
cd PersonaFlowBot
cp .env.example .env
# –í—Å—Ç–∞–≤—å—Ç–µ TELEGRAM_BOT_TOKEN –∏ GROQ_API_KEY

pip install -r requirements.txt
python main.py
```

## ‚òÅÔ∏è –î–µ–ø–ª–æ–π –Ω–∞ Fly.io

```
flyctl launch
flyctl secrets set TELEGRAM_BOT_TOKEN=xxx GROQ_API_KEY=xxx DATA_PATH=clients.parquet
flyctl deploy
```

## üóÉÔ∏è –î–∞–Ω–Ω—ã–µ

| –§–∞–π–ª                      | –û–ø–∏—Å–∞–Ω–∏–µ                                         |
| ----------------------------- | -------------------------------------------------------- |
| `client_features.parquet`   | –ü—Ä–∏–∑–Ω–∞–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤                        |
| `client_segments.parquet`   | –ú—ç–ø–ø–∏–Ω–≥ card_id ‚Üí segment_id                     |
| `clients.parquet`           | –§–∏–Ω–∞–ª—å–Ω—ã–π dataset                               |
| `client_features.xlsx/.csv` | –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç                |
| `clients_list.txt`          | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π —Ñ–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º ID |

## ‚öôÔ∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requirements.txt)

pandas
python-dotenv
openai
aiogram
matplotlib
scikit-learn
pyarrow

---
